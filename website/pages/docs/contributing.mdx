# Contribuir al Framework

Â¡Gracias por tu interÃ©s en contribuir a Fox Framework! Esta guÃ­a te ayudarÃ¡ a entender cÃ³mo puedes participar en el desarrollo y crecimiento del proyecto.

## ğŸŒŸ Formas de Contribuir

### ğŸ’» CÃ³digo
- Implementar nuevas funcionalidades
- Corregir bugs
- Mejorar el rendimiento
- Escribir tests
- Refactorizar cÃ³digo existente

### ğŸ“– DocumentaciÃ³n
- Mejorar documentaciÃ³n existente
- Crear nuevos tutoriales
- Traducir documentaciÃ³n
- Escribir ejemplos de cÃ³digo
- Crear videos tutoriales

### ğŸ› Reporte de Bugs
- Reportar bugs encontrados
- Proporcionar casos de reproducciÃ³n
- Verificar y priorizar issues
- Ayudar a otros usuarios con problemas

### ğŸ’¡ Ideas y Sugerencias
- Proponer nuevas funcionalidades
- Sugerir mejoras de API
- Compartir casos de uso
- Participar en discusiones de diseÃ±o

## ğŸš€ Primeros Pasos

### 1. Fork y Clone del Repositorio

```bash
# Fork el repositorio en GitHub
# Luego clona tu fork

git clone https://github.com/tu-usuario/fox-framework.git
cd fox-framework

# Agregar upstream remote
git remote add upstream https://github.com/fox-framework/fox-framework.git
```

### 2. ConfiguraciÃ³n del Entorno de Desarrollo

```bash
# Instalar dependencias
npm install

# Instalar dependencias de desarrollo
npm run setup:dev

# Verificar que todo funciona
npm test
npm run build
```

### 3. Estructura del Proyecto

```
fox-framework/
â”œâ”€â”€ src/                    # CÃ³digo fuente principal
â”‚   â”œâ”€â”€ core/              # Funcionalidades core
â”‚   â”œâ”€â”€ cli/               # Herramientas CLI
â”‚   â”œâ”€â”€ plugins/           # Plugins oficiales
â”‚   â””â”€â”€ examples/          # Ejemplos de uso
â”œâ”€â”€ docs/                  # DocumentaciÃ³n
â”œâ”€â”€ tests/                 # Tests
â”‚   â”œâ”€â”€ unit/              # Tests unitarios
â”‚   â”œâ”€â”€ integration/       # Tests de integraciÃ³n
â”‚   â””â”€â”€ e2e/               # Tests end-to-end
â”œâ”€â”€ benchmarks/            # Benchmarks de rendimiento
â”œâ”€â”€ scripts/               # Scripts de construcciÃ³n y deployment
â””â”€â”€ packages/              # Paquetes npm separados
```

## ğŸ”§ ConfiguraciÃ³n de Desarrollo

### Dependencias Requeridas

- **Node.js 16+**: Runtime principal
- **TypeScript 4.8+**: Lenguaje de desarrollo
- **Jest 29+**: Framework de testing
- **Docker**: Para tests de integraciÃ³n
- **Git**: Control de versiones

### Variables de Entorno

Crea un archivo `.env.development`:

```env
# Base de datos para tests
TEST_DATABASE_URL=postgresql://fox_test:password@localhost:5432/fox_test

# Redis para tests de cache
TEST_REDIS_URL=redis://localhost:6379/1

# Logging level
LOG_LEVEL=debug

# Habilitar debugging
DEBUG=fox:*
```

### Comandos de Desarrollo

```bash
# Desarrollo con hot reload
npm run dev

# Ejecutar tests
npm test
npm run test:watch
npm run test:coverage

# Linting y formatting
npm run lint
npm run lint:fix
npm run format

# Build
npm run build
npm run build:watch

# Benchmarks
npm run benchmark
```

## ğŸ“ Proceso de ContribuciÃ³n

### 1. Crear Issue (Opcional pero Recomendado)

Antes de trabajar en una funcionalidad grande, crea un issue para discutir:

```markdown
**DescripciÃ³n**
Breve descripciÃ³n de la funcionalidad o bug

**MotivaciÃ³n**
Â¿Por quÃ© es necesario este cambio?

**SoluciÃ³n Propuesta**
Â¿CÃ³mo planeas implementarlo?

**Alternativas Consideradas**
Â¿Hay otras formas de resolver esto?

**Tareas**
- [ ] Implementar funcionalidad
- [ ] Escribir tests
- [ ] Actualizar documentaciÃ³n
- [ ] Crear ejemplos
```

### 2. Crear Branch

```bash
# Actualizar main
git checkout main
git pull upstream main

# Crear branch descriptiva
git checkout -b feature/cache-redis-cluster
git checkout -b fix/memory-leak-in-parser
git checkout -b docs/getting-started-guide
```

### 3. Desarrollo

#### Convenciones de CÃ³digo

```typescript
// âœ… Bueno - Nombres descriptivos
export class UserAuthenticationService {
  async validateUserCredentials(email: string, password: string): Promise<User | null> {
    // ImplementaciÃ³n clara
  }
}

// âŒ Malo - Nombres poco descriptivos
export class UAService {
  async validate(e: string, p: string): Promise<any> {
    // ImplementaciÃ³n confusa
  }
}
```

#### Estructura de Commits

Usamos [Conventional Commits](https://www.conventionalcommits.org/):

```bash
# Tipos vÃ¡lidos
feat: nueva funcionalidad
fix: correcciÃ³n de bug
docs: cambios en documentaciÃ³n
style: formateo, punto y coma faltante, etc.
refactor: refactoring de cÃ³digo
test: agregar tests faltantes
chore: cambios en build, herramientas, etc.

# Ejemplos
git commit -m "feat(cache): add Redis cluster support"
git commit -m "fix(router): resolve memory leak in route matching"
git commit -m "docs(getting-started): add Docker setup instructions"
```

#### Testing

Todos los cambios deben incluir tests apropiados:

```typescript
// test/unit/cache/redis-cache.test.ts
import { RedisCache } from '../../../src/cache/redis-cache';

describe('RedisCache', () => {
  let cache: RedisCache;

  beforeEach(() => {
    cache = new RedisCache({
      url: process.env.TEST_REDIS_URL
    });
  });

  afterEach(async () => {
    await cache.flushAll();
    await cache.disconnect();
  });

  describe('set and get', () => {
    it('should store and retrieve values', async () => {
      await cache.set('test-key', 'test-value');
      const result = await cache.get('test-key');
      
      expect(result).toBe('test-value');
    });

    it('should respect TTL', async () => {
      await cache.set('ttl-key', 'ttl-value', 1); // 1 segundo
      
      // Inmediatamente debe existir
      expect(await cache.get('ttl-key')).toBe('ttl-value');
      
      // DespuÃ©s de 1.1 segundos no debe existir
      await new Promise(resolve => setTimeout(resolve, 1100));
      expect(await cache.get('ttl-key')).toBeNull();
    });
  });
});
```

#### DocumentaciÃ³n

Agrega JSDoc a funciones pÃºblicas:

```typescript
/**
 * Cachea un valor en Redis con un TTL opcional
 * 
 * @param key - Clave para almacenar el valor
 * @param value - Valor a almacenar (serÃ¡ serializado a JSON)
 * @param ttl - Tiempo de vida en segundos (opcional)
 * @returns Promise que resuelve cuando el valor estÃ¡ almacenado
 * 
 * @example
 * ```typescript
 * await cache.set('user:123', { name: 'John', email: 'john@example.com' }, 3600);
 * ```
 */
async set(key: string, value: any, ttl?: number): Promise<void> {
  // implementaciÃ³n
}
```

### 4. Pull Request

#### PreparaciÃ³n

```bash
# Ejecutar todos los checks antes del PR
npm run pre-commit

# Equivale a:
npm run lint
npm run type-check
npm test
npm run build
```

#### Template de PR

```markdown
## DescripciÃ³n
Breve descripciÃ³n de los cambios

## Tipo de Cambio
- [ ] Bug fix (cambio que no rompe funcionalidad existente)
- [ ] Nueva funcionalidad (cambio que agrega funcionalidad)
- [ ] Breaking change (cambio que rompe compatibilidad)
- [ ] DocumentaciÃ³n

## Â¿CÃ³mo se ha probado?
- [ ] Tests unitarios
- [ ] Tests de integraciÃ³n
- [ ] Tests manuales
- [ ] Benchmarks de rendimiento

## Checklist
- [ ] Mi cÃ³digo sigue las convenciones del proyecto
- [ ] He realizado auto-review de mi cÃ³digo
- [ ] He agregado tests que prueban mi fix/feature
- [ ] Tests nuevos y existentes pasan localmente
- [ ] He agregado documentaciÃ³n necesaria
- [ ] Mis cambios no generan warnings nuevos

## Screenshots (si aplica)
```

## ğŸ§ª GuÃ­a de Testing

### Estructura de Tests

```
tests/
â”œâ”€â”€ unit/                  # Tests aislados de unidades individuales
â”‚   â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ cache/
â”‚   â””â”€â”€ router/
â”œâ”€â”€ integration/           # Tests de interacciÃ³n entre componentes
â”‚   â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ api/
â”‚   â””â”€â”€ middleware/
â”œâ”€â”€ e2e/                   # Tests completos de flujo
â”‚   â”œâ”€â”€ user-registration/
â”‚   â””â”€â”€ order-processing/
â”œâ”€â”€ performance/           # Tests de rendimiento
â””â”€â”€ fixtures/              # Datos de prueba
```

### Writing Good Tests

```typescript
// âœ… Bueno - Descriptivo y completo
describe('UserService', () => {
  describe('createUser', () => {
    it('should create user with valid data and send welcome email', async () => {
      // Arrange
      const userData = {
        name: 'John Doe',
        email: 'john@example.com',
        password: 'secure123'
      };
      const mockUser = { id: '123', ...userData };
      
      userRepository.save.mockResolvedValue(mockUser);
      emailService.sendWelcome.mockResolvedValue(undefined);

      // Act
      const result = await userService.createUser(userData);

      // Assert
      expect(userRepository.save).toHaveBeenCalledWith(
        expect.objectContaining({
          name: userData.name,
          email: userData.email,
          password: expect.any(String) // hasheada
        })
      );
      expect(emailService.sendWelcome).toHaveBeenCalledWith(mockUser);
      expect(result).toEqual(mockUser);
    });

    it('should throw error when email already exists', async () => {
      // Arrange
      const userData = { email: 'existing@example.com' };
      userRepository.save.mockRejectedValue(new EmailExistsError());

      // Act & Assert
      await expect(userService.createUser(userData))
        .rejects
        .toThrow(EmailExistsError);
    });
  });
});
```

### Mocking Guidelines

```typescript
// âœ… Bueno - Mock especÃ­fico y Ãºtil
const mockUserRepository = {
  save: jest.fn(),
  findByEmail: jest.fn(),
  findById: jest.fn()
} as jest.Mocked<UserRepository>;

// âŒ Malo - Mock demasiado genÃ©rico
const mockUserRepository = {} as any;
```

## ğŸš€ Release Process

### Versioning

Fox Framework sigue [Semantic Versioning](https://semver.org/):

- **MAJOR** (1.0.0): Breaking changes
- **MINOR** (1.1.0): Nueva funcionalidad backward-compatible
- **PATCH** (1.1.1): Bug fixes backward-compatible

### Release Checklist

Para maintainers del proyecto:

```bash
# 1. Verificar que main estÃ¡ limpio
git status

# 2. Ejecutar todos los tests
npm run test:all

# 3. Ejecutar benchmarks
npm run benchmark

# 4. Generar changelog
npm run changelog

# 5. Bump version
npm version patch|minor|major

# 6. Build final
npm run build:production

# 7. Publish
npm publish

# 8. Tag y push
git push --follow-tags
```

## ğŸ“‹ Convenciones del Proyecto

### Code Style

Usamos Prettier y ESLint con configuraciÃ³n estricta:

```json
{
  "printWidth": 100,
  "tabWidth": 2,
  "useTabs": false,
  "semi": true,
  "singleQuote": true,
  "quoteProps": "as-needed",
  "trailingComma": "es5"
}
```

### Naming Conventions

```typescript
// Clases - PascalCase
class UserAuthenticationService {}

// Interfaces - PascalCase con I prefix
interface IUserRepository {}

// Types - PascalCase
type DatabaseConnection = {};

// Funciones y variables - camelCase
const getUserById = () => {};
const isAuthenticated = true;

// Constantes - SCREAMING_SNAKE_CASE
const MAX_RETRY_ATTEMPTS = 3;
const DEFAULT_TIMEOUT = 5000;

// Archivos - kebab-case
user-authentication.service.ts
database-connection.config.ts
```

### Error Handling

```typescript
// âœ… Bueno - Errores especÃ­ficos
export class UserNotFoundError extends Error {
  constructor(userId: string) {
    super(`User with ID ${userId} not found`);
    this.name = 'UserNotFoundError';
  }
}

// âœ… Bueno - Error handling consistente
async function getUser(id: string): Promise<User> {
  try {
    const user = await userRepository.findById(id);
    if (!user) {
      throw new UserNotFoundError(id);
    }
    return user;
  } catch (error) {
    if (error instanceof UserNotFoundError) {
      throw error;
    }
    throw new DatabaseError('Failed to retrieve user', error);
  }
}
```

## ğŸ› ï¸ Herramientas de Desarrollo

### ConfiguraciÃ³n de IDE

#### VS Code (Recomendado)

Instala estas extensiones:

```json
{
  "recommendations": [
    "ms-vscode.vscode-typescript-next",
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "ms-vscode.test-adapter-converter",
    "hbenl.vscode-test-explorer"
  ]
}
```

ConfiguraciÃ³n en `.vscode/settings.json`:

```json
{
  "typescript.preferences.importModuleSpecifier": "relative",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "jest.autoRun": "watch"
}
```

### Debug Configuration

```json
{
  "type": "node",
  "request": "launch",
  "name": "Debug Fox Framework",
  "program": "${workspaceFolder}/src/index.ts",
  "preLaunchTask": "npm: build",
  "outFiles": ["${workspaceFolder}/dist/**/*.js"],
  "env": {
    "NODE_ENV": "development",
    "DEBUG": "fox:*"
  }
}
```

## ğŸ–ï¸ Reconocimiento de Contribuidores

### Niveles de ContribuciÃ³n

- **Core Contributors**: Contribuidores regulares con acceso de escritura
- **Active Contributors**: Contribuidores frecuentes reconocidos
- **Contributors**: Cualquiera que haya hecho una contribuciÃ³n vÃ¡lida

### Proceso de Reconocimiento

1. **Primer PR aceptado**: Agregado a Contributors
2. **5+ PRs aceptados**: ConsideraciÃ³n para Active Contributor
3. **ContribuciÃ³n sostenida**: InvitaciÃ³n a Core Contributor

### Beneficios

- **Contributors**: Reconocimiento en README y sitio web
- **Active Contributors**: Badge especial + invitaciÃ³n a Discord privado
- **Core Contributors**: Acceso de escritura + participaciÃ³n en roadmap

## ğŸ“ Contacto y Soporte

### Canales de ComunicaciÃ³n

- **GitHub Issues**: Bugs y feature requests
- **GitHub Discussions**: Preguntas generales y discusiones
- **Discord**: Chat en tiempo real
- **Email**: [contributors@fox-framework.com](mailto:contributors@fox-framework.com)

### Mentoring

Â¿Nuevo en open source? Ofrecemos mentoring para primeros contribuidores:

- AsignaciÃ³n de issues "good first issue"
- RevisiÃ³n de cÃ³digo detallada
- Pair programming sessions
- GuÃ­a en Discord

## ğŸ™ CÃ³digo de Conducta

Todos los participantes deben seguir nuestro [CÃ³digo de Conducta](CODE_OF_CONDUCT.md):

- **SÃ© respetuoso**: Trata a todos con respeto y profesionalismo
- **SÃ© constructivo**: Proporciona feedback constructivo y Ãºtil
- **SÃ© inclusivo**: Fomenta un ambiente acogedor para todos
- **SÃ© paciente**: Recuerda que todos estamos aprendiendo

## âœ¨ Â¡Gracias por Contribuir!

Cada contribuciÃ³n, sin importar su tamaÃ±o, hace que Fox Framework sea mejor para toda la comunidad. Â¡Esperamos tus contribuciones!

---

**Â¿Preguntas?** No dudes en preguntar en [Discord](https://discord.gg/fox-framework) o crear un issue.
